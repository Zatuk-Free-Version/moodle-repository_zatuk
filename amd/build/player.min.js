define("repository_zatuk/player",["exports","jquery","core/ajax","core/modal_factory","core/modal_events","core/templates","media_videojs/video-lazy","core/str"],(function(_exports,_jquery,_ajax,_modal_factory,_modal_events,_templates,_videoLazy,_str){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}
/**
   * Defines zatuk player action script.
   *
   * @since      Moodle 2.0
   * @copyright  2023 Moodle India
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.play=_exports.default=_exports.confirmbox=void 0,_jquery=_interopRequireDefault(_jquery),_ajax=_interopRequireDefault(_ajax),_modal_factory=_interopRequireDefault(_modal_factory),_modal_events=_interopRequireDefault(_modal_events),_templates=_interopRequireDefault(_templates),_videoLazy=_interopRequireDefault(_videoLazy);const confirmbox=message=>{_modal_factory.default.create({body:message,type:_modal_factory.default.types.ALERT,buttons:{ok:(0,_str.get_string)("Thank_you")},removeOnClose:!0}).done((function(modal){modal.show()}))};_exports.confirmbox=confirmbox;const play=root=>{(0,_jquery.default)(root).on("click",(e=>{e.preventDefault();let args=(0,_jquery.default)(root).data();get_video_url(args.video)}))};_exports.play=play;const get_video_url=videoid=>{_ajax.default.call([{methodname:"repository_zatuk_get_video_url",args:{videoid:videoid}}])[0].done((response=>{if(!response.error){let video=response.response;_modal_factory.default.create({title:video.title,type:_modal_factory.default.types.DEFAULT,body:_templates.default.render("repository_zatuk/videos/player",video)}).done((modal=>{modal.show(),modal.getRoot().on(_modal_events.default.shown,(()=>{const player=(0,_videoLazy.default)("zatuk_player_"+videoid);player.src({autoplay:!0,controls:!0,src:video.player_url,type:"application/x-mpegURL"}),player.play()})),modal.getRoot().on(_modal_events.default.hidden,(function(){(0,_videoLazy.default)("zatuk_player_"+videoid).dispose()}))}))}})).fail((error=>{confirmbox(error)}))};var _default={play:play};return _exports.default=_default,_exports.default}));

//# sourceMappingURL=player.min.js.map